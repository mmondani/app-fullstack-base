<a href="https://www.gotoiot.com/">
    <img src="doc/gotoiot-logo.png" alt="logo" title="Goto IoT" align="right" width="60" height="60" />
</a>

Web App Full Stack Base
=======================

*Ayudar√≠a mucho si apoyaras este proyecto con una ‚≠ê en Github!*

Este proyecto es una aplicaci√≥n web fullstack que se ejecuta sobre el ecosistema `Docker`. Est√° compuesta por un compilador de `TypeScript` que te permite utilizar este superset de JavaScript para poder programar un `cliente web`. Tambi√©n tiene un servicio en `NodeJS` que te permite ejecutar c√≥digo en backend y al mismo tiempo disponibilizar el c√≥digo del cliente web para interactar con el servicio. Adem√°s tiene una `base de datos` MySQL que puede interactuar con el backend para guardar y consultar datos, y de manera adicional trae un `administrador` de base de datos para poder administrar la base en caso que lo necesites.

La aplicaci√≥n IoT de base que viene con este proyecto se encarga de crear una tabla llamada `Devices` en la base de datos, y la idea es que vos puedas desarrollar el c√≥digo de backend y frontend que te permita controlar desde el navegador el estado de los devices de un hogar inteligente - *como pueden ser luces, TVs, ventiladores, persianas, enchufes y otros* - y almacenar los estados de cada uno en la base de datos. 

Realizando estas tareas vas a a tener una aplicaci√≥n fullstack IoT del mundo real que utiliza tecnolog√≠as actuales en la que un backend es capaz de interactuar con una DB para cumplir con las peticiones de control que se le mandan desde el cliente web.

En esta imagen pod√©s ver una posible implementaci√≥n del cliente web que controla los artefactos del hogar.

![architecture](doc/webapp-example-1.png)

## Comenzando üöÄ

Esta secci√≥n es una gu√≠a con los pasos escenciales para que puedas poner en marcha la aplicaci√≥n.

<details><summary><b>Mira los pasos necesarios</b></summary><br>

### Instalar las dependencias

Para correr este proyecto es necesario que instales `Docker` y `Docker Compose`. 

En [este art√≠culo](https://www.gotoiot.com/pages/articles/docker_installation_linux/) publicado en nuestra web est√°n los detalles para instalar Docker y Docker Compose en una m√°quina Linux. Si quer√©s instalar ambas herramientas en una Raspberry Pi pod√©s seguir [este art√≠culo](https://www.gotoiot.com/pages/articles/rpi_docker_installation) de nuestra web que te muestra todos los pasos necesarios.

En caso que quieras instalar las herramientas en otra plataforma o tengas alg√∫n incoveniente, podes leer la documentaci√≥n oficial de [Docker](https://docs.docker.com/get-docker/) y tambi√©n la de [Docker Compose](https://docs.docker.com/compose/install/).

Continua con la descarga del c√≥digo cuando tengas las dependencias instaladas y funcionando.

### Descargar el c√≥digo

Para descargar el c√≥digo, lo m√°s conveniente es que realices un `fork` de este proyecto a tu cuenta personal haciendo click en [este link](https://github.com/gotoiot/app-fullstack-base/fork). Una vez que ya tengas el fork a tu cuenta, descargalo con este comando (acordate de poner tu usuario en el link):

```
git clone https://github.com/USER/app-fullstack-base.git
```

> En caso que no tengas una cuenta en Github podes clonar directamente este repo.

### Ejecutar la aplicaci√≥n

Para ejecutar la aplicaci√≥n tenes que correr el comando `docker-compose up` desde la ra√≠z del proyecto. Este comando va a descargar las im√°genes de Docker de node, de typescript, de la base datos y del admin de la DB, y luego ponerlas en funcionamiento. 

Para acceder al cliente web ingresa a a la URL [http://localhost:8000/](http://localhost:8000/) y para acceder al admin de la DB acced√© a [localhost:8001/](http://localhost:8001/). 

Si pudiste acceder al cliente web y al administrador significa que la aplicaci√≥n se encuentra corriendo bien. 

> Si te aparece un error la primera vez que corres la app, dete≈Ñe el proceso y volv√© a iniciarla. Esto es debido a que el backend espera que la DB est√© creada al iniciar, y en la primera ejecuci√≥n puede no alcanzar a crearse. A partir de la segunda vez el problema queda solucionado.

</details>

Continu√° explorando el proyecto una vez que lo tengas funcionando.

## Configuraciones de funcionamiento üî©

Al crearse la aplicaci√≥n se ejecutan los contenedores de Docker de cada servicio, se crea la base de datos y sus tablas. A continuaci√≥n pod√©s encontrar info si quer√©s cambiar la estructura de la DB o bien sus configuraciones de acceso.

<details><summary><b>Lee c√≥mo configurar la aplicaci√≥n</b></summary><br>

### Configuraci√≥n de la DB

Como ya comprobaste, para acceder PHPMyAdmin ten√©s que ingresar en la URL [localhost:8001/](http://localhost:8001/). En el login del administrador, el usuario para acceder a la db es `root` y contrase√±a es la variable `MYSQL_ROOT_PASSWORD` del archivo `docker-compose.yml`.

Para el caso del servicio de NodeJS que se comunica con la DB fijate que en el archivo `src/backend/mysql-connector.js` est√°n los datos de acceso para ingresar a la base.

Si quisieras cambiar la contrase√±a, puertos, hostname u otras configuraciones de la DB deber√≠as primero modificar el servicio de la DB en el archivo `docker-compose.yml` y luego actualizar las configuraciones para acceder desde PHPMyAdmin y el servicio de NodeJS.

### Estructura de la DB

Al iniciar el servicio de la base de datos, si esta no est√° creada toma el archivo que se encuentra en `db/dumps/smart_home.sql` para crear la base de datos autom√°ticamente.

En ese archivo est√° la configuraci√≥n de la tabla `Devices` y otras configuraciones m√°s. Si quisieras cambiar algunas configuraciones deber√≠as modificar este archivo y crear nuevamente la base de datos para que se tomen en cuenta los cambios.

Ten√© en cuenta que la base de datos se crea con permisos de superusuario por lo que no podr√≠as borrar el directorio con tu usuario de sistema, para eso deb√©s hacerlo con permisos de administrador. En ese caso pod√©s ejecutar el comando `sudo rm -r db/data` para borrar el directorio completo.

</details>


## Detalles principales üîç

En esta secci√≥n vas a encontrar las caracter√≠sticas m√°s relevantes del proyecto.

<details><summary><b>Mira los detalles m√°s importantes de la aplicaci√≥n</b></summary><br>
<br>

### Arquitectura de la aplicaci√≥n

Como ya pudiste ver, la aplicaci√≥n se ejecuta sobre el ecosistema Docker, y en esta imagen pod√©s ver el diagrama de arquitectura.

![architecture](doc/architecture.png)

### El cliente web

El cliente web es una Single Page Application que se comunica con el servicio en NodeJS mediante JSON a trav√©s de requests HTTP. Puede consultar el estado de dispositivos en la base de datos (por medio del servicio en NodeJS) y tambi√©n cambiar el estado de los mismos. Los estilos del c√≥digo est√°n basados en **Material Design**.

### El servicio web

El servicio en **NodeJS** posee distintos endpoints para comunicarse con el cliente web mediante requests HTTP enviando **JSON** en cada transacci√≥n. Procesando estos requests es capaz de comunicarse con la base de datos para consultar y controlar el estado de los dispositivos, y devolverle una respuesta al cliente web tambi√©n en formato JSON. As√≠ mismo el servicio es capaz de servir el c√≥digo del cliente web.

### La base de datos

La base de datos se comunica con el servicio de NodeJS y permite almacenar el estado de los dispositivos en la tabla **Devices**. Ejecuta un motor **MySQL versi√≥n 5.7** y permite que la comunicaci√≥n con sus clientes pueda realizarse usando usuario y contrase√±a en texto plano. En versiones posteriores es necesario brindar claves de acceso, por este motivo la versi√≥n 5.7 es bastante utilizada para fases de desarrollo.

### El administrador de la DB

Para esta aplicaci√≥n se usa **PHPMyAdmin**, que es un administrador de base de datos web muy utilizado y que pod√©s utilizar en caso que quieras realizar operaciones con la base, como crear tablas, modificar columnas, hacer consultas y otras cosas m√°s.

### El compilador de TypeScript

**TypeScript** es un lenguaje de programaci√≥n libre y de c√≥digo abierto desarrollado y mantenido por Microsoft. Es un superconjunto de JavaScript, que esencialmente a√±ade tipos est√°ticos y objetos basados en clases. Para esta aplicaci√≥n se usa un compilador de TypeScript basado en una imagen de [Harmish](https://hub.docker.com/r/harmish) en Dockerhub, y est√° configurado para monitorear en tiempo real los cambios que se realizan sobre el directorio **src/frontend/ts** y autom√°ticamente generar c√≥digo compilado a JavaScript en el directorio  **src/frontend/js**. Los mensajes del compilador aparecen autom√°ticamente en la terminal al ejecutar el comando **docker-compose up**.

### Ejecuci√≥n de servicios

Los servicios de la aplicaci√≥n se ejecutan sobre **contenedores de Docker**, as√≠ se pueden desplegar de igual manera en diferentes plataformas. Los detalles sobre c√≥mo funcionan los servicios los pod√©s ver directamente en el archivo **docker-compose.yml**.

### Organizaci√≥n del proyecto

En la siguiente ilustraci√≥n pod√©s ver c√≥mo est√° organizado el proyecto para que tengas en claro qu√© cosas hay en cada lugar.

```sh
‚îú‚îÄ‚îÄ db                          # directorio de la DB
‚îÇ   ‚îú‚îÄ‚îÄ data                    # estructura y datos de la DB
‚îÇ   ‚îî‚îÄ‚îÄ dumps                   # directorio de estructuras de la DB
‚îÇ       ‚îî‚îÄ‚îÄ smart_home.sql      # estructura con la base de datos "smart_home"
‚îú‚îÄ‚îÄ doc                         # documentacion general del proyecto
‚îî‚îÄ‚îÄ src                         # directorio codigo fuente
‚îÇ   ‚îú‚îÄ‚îÄ backend                 # directorio para el backend de la aplicacion
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.js            # codigo principal del backend
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mysql-connector.js  # codigo de conexion a la base de datos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ package.json        # configuracion de proyecto NodeJS
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ package-lock.json   # configuracion de proyecto NodeJS
‚îÇ   ‚îî‚îÄ‚îÄ frontend                # directorio para el frontend de la aplicacion
‚îÇ       ‚îú‚îÄ‚îÄ js                  # codigo javascript que se compila autom√°ticamente
‚îÇ       ‚îú‚îÄ‚îÄ static              # donde alojan archivos de estilos, imagenes, fuentes, etc.
‚îÇ       ‚îú‚îÄ‚îÄ ts                  # donde se encuentra el codigo TypeScript a desarrollar
‚îÇ       ‚îî‚îÄ‚îÄ index.html          # archivo principal del cliente HTML
‚îú‚îÄ‚îÄ docker-compose.yml          # archivo donde se aloja la configuracion completa
‚îú‚îÄ‚îÄ README.md                   # este archivo
‚îú‚îÄ‚îÄ CHANGELOG.md                # archivo para guardar los cambios del proyecto
‚îú‚îÄ‚îÄ LICENSE.md                  # licencia del proyecto
```

> No olvides ir poniendo tus cambios en el archivo `CHANGELOG.md` a medida que avanzas en el proyecto.

</details>

## Detalles de implementaci√≥n üíª

En esta secci√≥n se describen los destalles espec√≠ficos de funcionamiento del c√≥digo.

<details><summary><b>Mira los detalles de implementaci√≥n</b></summary><br>

### Agregar un dispositivo

Para agregar un dispositivo, en el dashboard principal se debe hacer click en el bot√≥n `Agregar Dispositivo`.

![dashboard](doc/dashboard.png)

Una vez hecho esto, aparecer√° un popup que permite elegir un √≠cono, un nombre, una descripci√≥n y un tipo para el nuevo dispositivo.

![new_device](doc/new_device.png)

Al hacer click en `Crear`, se va a agregar el nuevo dispositivo.

Por otro lado, cualquier dispositivo creado puede ser modificado, permitiendo cambiarle su nombre, su descripci√≥n o su √≠cono. Para modificarlo, se debe hacer click en los tres puntitos arriba a la derecha de la tarjeta del dispositivo:

![edit_device1](doc/edit_device1.png)

En el men√∫ que se abre, se debe elegir la opci√≥n `Modificar`:

![edit_device2](doc/edit_device2.png)

Finalmente, se va a abrir un popup en el que se puede cambiar cualquiera de los datos. Para completar el proceso de modificaci√≥n se debe presionar el bot√≥n `Modificar` del popup.

![edit_device2](doc/edit_device3.png)

Adem√°s, en el mismo men√∫ de los tres puntitos, se puede elegir la opci√≥n `Eliminar`, para borrar el dispositivo.

### Frontend

En `index.html` se establece la estructura b√°sica del dashboard, el cual luego va a ser llenado con los dispositivos. Esta estructura est√° compuesta por:
- bot√≥n con id `newDevice`: al hacer click se va a mostrar un popup para agregar un dispositivo.
- `<div>` con id `main_container_devices_list`: va a contener las card que representan a cada uno de los dispositivos.
- `<div>` con id `modal_new_device`: el `<div>` usa la clase modal, para representar un popup. Se lo incluye en el HTML ya que solo se lo va a mostrar cuando se lo requiera. Este popup va a ser usado para crear un nuevo dispositivo.
- `<div>` con id `modal_modify_device`: al igual que `modal_new_device` usa la clase modal y va a representar un popup que se va a mostrar cuando se quiera modificar un dispositivo existente.

La **entidad "dispositivo"** va a ser representada en el frontend a trav√©s de la clase `Device` (archivo `device.ts`). Esta clase contiene los siguientes campos:
- `id`: es de tipo number y es un n√∫mero √∫nico asignado por el backend que identifica a ese dispositivo.
- `name`: es de tipo string y es el nombre del dispositivo.
- `description`: es de tipo string y es la descripci√≥n del dispositivo.
- `state`: es de tipo number y va a contener un n√∫mero entre 0.0 y 1.0. En el caso de los dispositivos de tipo On/Off esta variable va a valer 0.0 o 1.0. En el caso de los dimerizables, va a valer cualquier n√∫mero entre 0.0 y 1.0.
- `type`: es de tipo number e indica el tipo de dispositivo. 0 para los On/Off y 1 para los dimerizables.
- `icon`: es de tipo string y contiene el nombre de la imagen que se usa como √≠cono.

La **l√≥gica principal** del frontend se implementa en la clase `Main` (en el archivo `main.ts`). En esta clase b√°sicamente se hacen tres cosas:
- Inicializaci√≥n: en el m√©todo `main` de la clase se crea una instancia de la clase `MyFramework` la cual va a brindar algunas herramientas usadas por la clase `Main`. Adem√°s se hace un request (GET a `/devices`) al backend para pedir todos los dispositivos a mostrar. Finalmente se indica que la clase `Main` va a ser la que reciba los eventos `click` del dashboard. Para esto, la clase `Main` implementa la interfaz `EventListenerObject`.
- Manejo de eventos: la clase main (en su m√©todo `handleEvent`) va a recibir todos los eventos de click que se hagan en cualquier elemento HTML que est√© dentro del `<div>` con id `main_container_devices`. Este `<div>` contiene el bot√≥n para agregar dispositivos, las cards de todos los dispositivos y los dos modals antes explicados. Se eligi√≥ configurar un √∫nico event listener en este `<div>` ya que parte de la web va a ser generada de forma din√°mica en funci√≥n de los dispositivos que haya que mostrar.
Dentro de este m√©todo, dependiendo del id del elemento HTML sobre el que se hizo click, se van a realizar diferentes acciones:
  - `newDevice`: se hizo click en el bot√≥n para agregar un dispositivo. Se va a mostrar el modal `modal_new_device` en el que se van a cargar los valores de cada uno de los campos de un nuevo equipo.
  - `modal_new_device_create`: se hizo click en el bot√≥n Crear del modal `modal_new_device`, por lo que se recuperan los valores de los elementos del formulario contenido en ese modal y se realiza un `POST` al endpoint `/devices` para darlo de alta en el backend.
  - `modal_modify_device_modify`: se hizo click en el bot√≥n Modificar del modal `modal_modify_device` para modificar un dispositivo ya existente. Se recuperan los valores de los elementos del formulario de ese modal y se realiza un `PATCH` al endpoint `/devices` para modificar el dispositivo en el backend.
  - Todos los elementos clickeables de las cards que representan a los dispositivos tienen un id con el siguiente formato: `opcion_id`. Es decir, cada elemento, en su id contiene qu√© hace ese bot√≥n y el ID del dispostivo sobre lo que se quiere hacer la acci√≥n:
    - `modify`: se hizo click en la opci√≥n Modificar del dropdown que se abre al hacer click en los tres puntitos de la card del dispositivo con ID `id`. Se va a mostrar el modal `modal_modify_device` cargando en los elementos del formulario los valores actuales del dispositivo. Adem√°s se va a guardar la referencia al dispositivo que se est√° modificando en la variable `deviceToModify` para poder recuperar el resto de los campos si finalmente se completa la operaci√≥n de modificaci√≥n.
    - `delete`: se hizo click en la opci√≥n Eliminar del dropdown que se abre al hacer click en los tres puntitos de la card del dispositivo con ID `id`. Se realiza un `DELETE` al endpoint `/devices/:id` para borrarlo en el backend.
    - `switch`: se hizo click en el switch de la card del dispositivo con ID `id`. Se cambia el estado del dispositivo y se env√≠a un `POST` al endpoint `/devices/state` para cambiarlo en el backend.
    - `slider`: se cambi√≥ el valor del slider de la card del dispositivo con ID `id`. Se cambia el estado del dispositivo y se env√≠a un `POST` al endpoint `/devices/state` para cambiarlo en el backend.
- Manejo de las responses de los requests: en cada uno de los requests se fija que el resultado de esa operaci√≥n debe ser devuelta a la instancia de `Main`. Para manejar estos callback, la clase `Main` implementa varias interfaces: `GETResponseListener`, `POSTResponseListener`, `DELETEResponseListener` y `PATCHResponseListener`.
  - `handleGETResponse`: va a procesar el response al GET enviado a `/devices`. El body del response va a contener un array con todos los dispositivos existentes. Por cada uno de esos dispositivos va a crear una instancia de la clase `DeviceCard` (explicada m√°s adelante) y el c√≥digo HTML que genera se lo va a agregar al elemento HTML `main_container_devices_list` para que muestre la card.
  - `handlePOSTResponse`: va a procesar el response al POST `/devices` para crear un nuevo dispositivo. En el body del response viene el dispositivo creado. Se crea una instancia de la clase `DeviceCard` y se la agrega al HTML.
  - `handleDELETEResponse`: procesa el response al DELETE `/devices/:id`. Elimina la card del HTML correspondiente al dispositivo eliminado.
  - `handlePATCHResponse`: procesa el response al PATCH `/devices`. En el body del response viene el dispositivo modificado. Se modifica la instancia de `DeviceCard` correspondiente a ese dispositivo y se modifica el c√≥digo HTML asociado.

La clase **MyFramework** tiene varios m√©todos de utilidad para poder acceder a los elementos del DOM y generar requests al backend. Adem√°s tiene dos arrays: el primero contiene la lista de dispositivos que se obtuvo del backend y el segundo es la lista de `DeviceCard` que se agregaron al HTML. La clase `Main` va a consultar estos dos arrays para generar el dashboard.

Finalmente, la clase **DeviceCard** se la utiliza para representar un dispositivo en HTML. Al crear una instancia, se le pasa una instancia de la clase `Device` y genera el c√≥digo HTML necesario para dibujar una card que la represente. Luego, mediante el m√©todo `attach` de la clase `DeviceCard` se le indica a qu√© elemento del DOM se debe agregar este c√≥digo HTML de la `DeviceCard`. Tambi√©n incluye el m√©todo `changeDevice` para volver a generar el c√≥digo HTML de la card cuando cambia la instancia de `Device` que tiene que representar.

### Backend

El backend implementa una API REST. La l√≥gica relacionada al CRUD de los devices se divide en tres capas:
- devices/model.js: contiene las funciones que interactuan directamente con la fuente de datos. En este caso los datos se obtienen de un archivo local y todos los cambios se mantienen en RAM, no se vuelven a persistir.
- devices/middleware.js: contiene funciones encargadas de chequear la validez en cuanto a formato de los requests. Estas funciones van a ser llamadas al procesar los requests antes de efectivamente ejecutar la funci√≥n que implementa la l√≥gica de ese endpoint
- devices/controller.js: contiene las funciones que implementan la l√≥gica propiamente dicha del endpoint.

En la carpeta **doc** se va a encontrar el archivo *Backend Smart Home.postman_collection.json* el cual es una colecci√≥n de Postman con ejemplos de requests a los endpoints que a continuaci√≥n se explican.

<details><summary><b>Ver los endpoints disponibles</b></summary><br>

<summary>1) Obtener todos los dispositivos</summary>
<details>

* **URL:** /devices

* **M√©todo:** `GET`
  
*  **Par√°metros URL:** -

*  **Body:** -

* **Respuesta exitosa:**

  * **C√≥digo:** 200 <br />
    **Body:** array con todos los dispositivos
    <br>
    *Ejemplo*
    ```json
    [
        {
            "id": 1,
            "name": "L√°mpara 1",
            "description": "Luz Living",
            "state": 1,
            "type": 0,
            "icon": "1.png"
        },
        {
            "id": 2,
            "name": "L√°mpara 2",
            "description": "Luz Cocina",
            "state": 0,
            "type": 0,
            "icon": "1.png"
        }
    ]
    ```
 
* **Respuesta fallida:**

  * **C√≥digo:** 500 <br />
    **Body:** -
</details>

<summary>2) Obtener un dispositivo</summary>
<details>

* **URL:** /devices/:id

* **M√©todo:** `GET`
  
*  **Par√°metros URL:**
 
   `id=[number]`: ID del device que se est√° consultando.

*  **Body:** -

* **Respuesta exitosa:**

  * **C√≥digo:** 200 <br />
    **Body:** device con ID id
    <br>
    *Ejemplo*
    ```json
    {
        "id": 1,
        "name": "L√°mpara 1",
        "description": "Luz Living",
        "state": 1,
        "type": 0,
        "icon": "1.png"
    }
    ```
 
* **Respuesta fallida:**

  * **C√≥digo:** 400 <br />
    **Body:** objeto indicando el error. Posibles errores:<br />
                - No se encuentra el id<br />
    <br>
    *Ejemplo*
    ```json
    {
        "errores": ["No se encuentra el id"]
    }
    ```
</details>

<summary>3) Modificar el estado de un dispositivo</summary>
<details>

* **URL:** /devices/state

* **M√©todo:** `POST`
  
*  **Par√°metros URL:** -

*  **Body:**
   
    **Obligatorios:**
 
   `id=[number]`: ID del device.<br/>
   `state=[number]`: n√∫mero entre 0.0 y 1.0 que indica el estado del device.
   <br/>
   *Ejemplo*
    ```json
    {
        "id": 1,
        "state": 0.7
    }
    ```

* **Respuesta exitosa:**

  * **C√≥digo:** 200 <br />
    **Body:** device con el nuevo ID
    <br>
    *Ejemplo*
    ```json
    {
        "id": 1,
        "name": "L√°mpara 1",
        "description": "Luz Living",
        "state": 0.7,
        "type": 0,
        "icon": "1.png"
    }
    ```
 
* **Respuesta fallida:**

  * **C√≥digo:** 400 <br />
    **Body:** objeto indicando el error. Posibles errores:<br />
                - No se encuentra el id<br />
                - Falta el campo id<br />
                - Falta el campo state<br />
                - state debe ser un n√∫mero entre 0.0 y 1.0<br />
    <br>
    *Ejemplo*
    ```json
    {
        "errores": ["No se encuentra el id"]
    }
    ```
</details>

<summary>4) Crear un nuevo dispositivo</summary>
<details>

* **URL:** /devices

* **M√©todo:** `POST`
  
*  **Par√°metros URL:** -

*  **Body:**
   
    **Obligatorios:**
 
   `name=[string]`: nombre del nuevo device.<br/>
   `description=[string]`: descripci√≥n del nuevo device.<br/>
   `type=[number]`: tipo de dispositivo. 0 para dispositivo ON-OFF, 1 para dispositivo dimerizable.<br/>
   `icon=[string]`: nombre de la imagen que representa el √≠cono asociado al device<br/>
   <br/>
   *Ejemplo*
    ```json
    {
        "name": "nombre",
        "description": "descripci√≥n",
        "type": 1,
        "icon": "1.png"
    }
    ```

* **Respuesta exitosa:**

  * **C√≥digo:** 200 <br />
    **Body:** device creado
    <br>
    *Ejemplo*
    ```json
    {
        "id": 1,
        "name": "L√°mpara 1",
        "description": "Luz Living",
        "state": 0.7,
        "type": 0
    }
    ```
 
* **Respuesta fallida:**

  * **C√≥digo:** 500 <br />
    **Body:** -

  * **C√≥digo:** 400 <br />
    **Body:** objeto indicando el error. Posibles errores:<br />
                - Falta el campo name<br />
                - Falta el campo description<br />
                - Falta el campo type<br />
                - Falta el campo icon<br />
                - type debe valer 0 o 1<br />
    <br>
    *Ejemplo*
    ```json
    {
        "errores": ["type debe valer 0 o 1"]
    }
    ```
</details>

<summary>5) Modificar un dispositivo existente</summary>
<details>

* **URL:** /devices

* **M√©todo:** `PATCH`
  
*  **Par√°metros URL:** -

*  **Body:**
   
    **Obligatorios:**
 
   `id=[number]`: ID del device a modificar.<br/>
   `name=[string]`: nuevo nombre del device.<br/>
   `description=[string]`: nueva descripci√≥n del device.<br/>
   `state=[number]`: n√∫mero entre 0.0 y 1.0 que indica el nuevo estado del device.<br/>
   `icon=[string]`: nombre de la imagen que representa el √≠cono asociado al device<br/>
   <br/>
   *Ejemplo*
    ```json
    {
        "id": 34534534
        "name": "nombre",
        "description": "descripci√≥n",
        "state": 1,
        "icon": "3.png"
    }
    ```

* **Respuesta exitosa:**

  * **C√≥digo:** 200 <br />
    **Body:** device modificado
    <br>
    *Ejemplo*
    ```json
    {
        "id": 34534534,
        "name": "nombre",
        "description": "descripci√≥n",
        "state": 1,
        "type": 0,
        "icon": "3.png"
    }
    ```
 
* **Respuesta fallida:**

  * **C√≥digo:** 500 <br />
    **Body:** -

  * **C√≥digo:** 400 <br />
    **Body:** objeto indicando el error. Posibles errores:<br />
                - No se encuentra el id<br />
                - Falta el campo id<br />
                - Falta el campo name<br />
                - Falta el campo description<br />
                - Falta el campo state<br />
                - Falta el campo icon<br />
                - state debe ser un n√∫mero entre 0.0 y 1.0<br />
    <br>
    *Ejemplo*
    ```json
    {
        "errores": ["No se encuentra el id"]
    }
    ```
</details>


<summary>6) Eliminar un dispositivo</summary>
<details>

* **URL:** /devices/:id

* **M√©todo:** `DELETE`
  
*  **Par√°metros URL:**
 
   `id=[number]`: ID del device que se quiere eliminar.

*  **Body:** -

* **Respuesta exitosa:**

  * **C√≥digo:** 200 <br />
    **Body:** ID eliminado
    <br>
    *Ejemplo*
    ```json
    {
        "id": 1,
    }
    ```
 
* **Respuesta fallida:**

  * **C√≥digo:** 400 <br />
    **Body:** objeto indicando el error. Posibles errores:<br />
                - No se encuentra el id<br />
    <br>
    *Ejemplo*
    ```json
    {
        "errores": ["No se encuentra el id"]
    }
    ```
</details>


</details>

</details>


## Tecnolog√≠as utilizadas üõ†Ô∏è

En esta secci√≥n pod√©s ver las tecnolog√≠as m√°s importantes utilizadas.

<details><summary><b>Mira la lista completa de tecnolog√≠as</b></summary><br>

* [Docker](https://www.docker.com/) - Ecosistema que permite la ejecuci√≥n de contenedores de software.
* [Docker Compose](https://docs.docker.com/compose/) - Herramienta que permite administrar m√∫ltiples contenedores de Docker.
* [Node JS](https://nodejs.org/es/) - Motor de ejecuci√≥n de c√≥digo JavaScript en backend.
* [MySQL](https://www.mysql.com/) - Base de datos para consultar y almacenar datos.
* [PHPMyAdmin](https://www.phpmyadmin.net/) - Administrador web de base de datos.
* [Material Design](https://material.io/design) - Bibliotecas de estilo responsive para aplicaciones web.
* [TypeScript](https://www.typescriptlang.org/) - Superset de JavaScript tipado y con clases.

</details>

## Contribuir üñáÔ∏è

Si est√°s interesado en el proyecto y te gustar√≠a sumar fuerzas para que siga creciendo y mejorando, pod√©s abrir un hilo de discusi√≥n para charlar tus propuestas en [este link](https://github.com/gotoiot/app-fullstack-base/issues/new). As√≠ mismo pod√©s leer el archivo [Contribuir.md](https://github.com/gotoiot/gotoiot-doc/wiki/Contribuir) de nuestra Wiki donde est√°n bien explicados los pasos para que puedas enviarnos pull requests.

## Sobre Goto IoT üìñ

Goto IoT es una plataforma que publica material y proyectos de c√≥digo abierto bien documentados junto a una comunidad libre que colabora y promueve el conocimiento sobre IoT entre sus miembros. Ac√° pod√©s ver los links m√°s importantes:

* **[Sitio web](https://www.gotoiot.com/):** Donde se publican los art√≠culos y proyectos sobre IoT. 
* **[Github de Goto IoT:](https://github.com/gotoiot)** Donde est√°n alojados los proyectos para descargar y utilizar. 
* **[Comunidad de Goto IoT:](https://groups.google.com/g/gotoiot)** Donde los miembros de la comunidad intercambian informaci√≥n e ideas, realizan consultas, solucionan problemas y comparten novedades.
* **[Twitter de Goto IoT:](https://twitter.com/gotoiot)** Donde se publican las novedades del sitio y temas relacionados con IoT.
* **[Wiki de Goto IoT:](https://github.com/gotoiot/doc/wiki)** Donde hay informaci√≥n de desarrollo complementaria para ampliar el contexto.

## Muestas de agradecimiento üéÅ

Si te gust√≥ este proyecto y quisieras apoyarlo, cualquiera de estas acciones estar√≠a m√°s que bien para nosotros:

* Apoyar este proyecto con una ‚≠ê en Github para llegar a m√°s personas.
* Sumarte a [nuestra comunidad](https://groups.google.com/g/gotoiot) abierta y dejar un feedback sobre qu√© te pareci√≥ el proyecto.
* [Seguirnos en twitter](https://github.com/gotoiot/doc/wiki) y dejar alg√∫n comentario o like.
* Compartir este proyecto con otras personas.

## Autores üë•

Las colaboraciones principales fueron realizadas por:

* **[Agustin Bassi](https://github.com/agustinBassi)**: Ideaci√≥n, puesta en marcha y mantenimiento del proyecto.
* **[Ernesto Giggliotti](https://github.com/ernesto-g)**: Creaci√≥n inicial del frontend, elecci√≥n de Material Design.
* **[Brian Ducca](https://github.com/brianducca)**: Ayuda para conectar el backend a la base de datos, puesta a punto de imagen de Docker.

Tambi√©n pod√©s mirar todas las personas que han participado en la [lista completa de contribuyentes](https://github.com/###/contributors).

## Licencia üìÑ

Este proyecto est√° bajo Licencia ([MIT](https://choosealicense.com/licenses/mit/)). Pod√©s ver el archivo [LICENSE.md](LICENSE.md) para m√°s detalles sobre el uso de este material.

---

**Copyright ¬© Goto IoT 2021** ‚å®Ô∏è [**Website**](https://www.gotoiot.com) ‚å®Ô∏è [**Group**](https://groups.google.com/g/gotoiot) ‚å®Ô∏è [**Github**](https://www.github.com/gotoiot) ‚å®Ô∏è [**Twitter**](https://www.twitter.com/gotoiot) ‚å®Ô∏è [**Wiki**](https://github.com/gotoiot/doc/wiki)
